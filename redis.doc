aof和rdb的作用就是把redis数据库的数据持久化
aof：就是记录所有的命令，如果断电了，就把磁盘里的aof文件的所有命令重新执行一遍，数据就正常了（这和mysql的bin.log，apache.log相似）；那现在需要考虑的问题就是：1.怎么把命令从内存持久化到
  磁盘里面？；2.在持久化过程中，如果有新的命令执行该怎么办？；3.多久进行一次持久化，如果还没有持久化，内存崩了，数据是否丢失，这个问题怎么解决？
答1: 嗯，redis主进程继续接受客户端的请求，然后会fork出来一个子进程去执行持久化的过程；
答2：如果在持久化的过程中有新的命令执行了，就把新命令缓存到一个文件里面，等到子进程把文件持久化完成之后，就把新缓存的数据追加到aof文件后面；
答3:有三种，always，everysec，no；调用fsync（）函授后就是告诉OS，你把我的数据持久化到disk上，但有些OS不立即持久化数据，三种模式；
  always就是实时同步，每一次写都持久化到disk，安全，效率低；everysec是每秒rewrite一次；那no就是满足一定条件了在rewrite，效率高，不安全，可能
  丢失数据多；
4：主线程禁止调用fsyn（）函数，因为这会导致主线程阻塞；故redis主动rewrite，当aof log足够大就去主动rewrite；
